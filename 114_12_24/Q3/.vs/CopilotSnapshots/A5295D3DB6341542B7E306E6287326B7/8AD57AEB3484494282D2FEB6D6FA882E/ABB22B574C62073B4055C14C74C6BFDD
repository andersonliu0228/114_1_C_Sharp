using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Q3
{
    public partial class Form1 : Form
    {
        private Random random = new Random();
        private int drawCount = 0;

        public Form1()
        {
            InitializeComponent();
        }

        private void btnGenerate_Click(object sender, EventArgs e)
        {
            // 產生5個不重複的1-49隨機號碼
            List<int> numbers = new List<int>();
            
            while (numbers.Count < 5)
            {
                int num = random.Next(1, 50); // 1-49
                if (!numbers.Contains(num))
                {
                    numbers.Add(num);
                }
            }

            // 排序號碼
            numbers.Sort();

            // 顯示在文字方塊中
            txtNumber1.Text = numbers[0].ToString();
            txtNumber2.Text = numbers[1].ToString();
            txtNumber3.Text = numbers[2].ToString();
            txtNumber4.Text = numbers[3].ToString();
            txtNumber5.Text = numbers[4].ToString();
        }

        private void btnDraw_Click(object sender, EventArgs e)
        {
            // 檢查是否已產生號碼
            if (string.IsNullOrEmpty(txtNumber1.Text))
            {
                MessageBox.Show("請先產生號碼！", "提示", MessageBoxButtons.OK, MessageBoxIcon.Information);
                return;
            }

            // 增加開獎期數
            drawCount++;

            // 將號碼加入歷史記錄
            string historyEntry = $"第{drawCount}個號碼: {txtNumber1.Text}\r\n" +
                                  $"第{drawCount * 2}個號碼: {txtNumber2.Text}\r\n" +
                                  $"第{drawCount * 3}個號碼: {txtNumber3.Text}\r\n" +
                                  $"第{drawCount * 4}個號碼: {txtNumber4.Text}\r\n";

            txtHistory.Text = "本期開獎號碼：\r\n" + historyEntry;
        }

        private void btnExit_Click(object sender, EventArgs e)
        {
            // 關閉應用程式
            this.Close();
        }
    }
}
